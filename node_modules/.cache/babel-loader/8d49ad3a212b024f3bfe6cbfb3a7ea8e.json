{"ast":null,"code":"var _jsxFileName = \"/Users/hopper/Documents/reactJs/hackernews_clone/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport Table from \"./components/Table.jsx\";\nimport Chart from \"./components/chart.jsx\";\nimport Buttons from \"./components/buttons.jsx\";\n\nfunction App() {\n  const [data, setdata] = useState([]);\n  const [nopg, setnopg] = useState(0);\n  const [currentpg, setcurrentpg] = useState(0);\n  const PATH_BASE = 'https://hn.algolia.com/api/v1';\n  const PATH_SEARCH = '/search';\n  const PARAM_PAGE = 'page=';\n  const PARAM_HPP = 'hitsPerPage=10';\n  const PARAM_TAGS = 'tags=front_page';\n  useEffect(() => {\n    fetchData(0);\n  }, []);\n\n  const saveInlocalStorage = (data, arg) => {\n    let k = [];\n    data.map(value => {\n      k.push({\n        id: value.objectID,\n        points: value.points,\n        url: value.url,\n        num_comments: value.num_comments,\n        created_at: value.created_at,\n        author: value.author,\n        title: value.title\n      });\n    });\n\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${arg}`, JSON.stringify(k));\n    }\n  };\n\n  const update = arg => {\n    let temp = localStorage.getItem(`page-${arg}`);\n    temp = JSON.parse(temp);\n    setdata(temp);\n  };\n\n  const fetchData = async arg => {\n    await axios.get(`${PATH_BASE}${PATH_SEARCH}?${PARAM_TAGS}&${PARAM_HPP}&page=${arg}`).then(res => {\n      setnopg(res.data.nbPages);\n\n      if (localStorage.getItem(`page-${arg}`) === null) {\n        saveInlocalStorage(res.data.hits, arg);\n        update(arg);\n      } else {\n        update(arg);\n      }\n    });\n  };\n\n  const prev = () => {\n    if (currentpg - 1 >= 0) {\n      setcurrentpg(currentpg - 1);\n      fetchData(currentpg - 1);\n    }\n  };\n\n  const next = () => {\n    if (currentpg + 1 < nopg) {\n      fetchData(currentpg + 1);\n      setcurrentpg(currentpg + 1);\n    }\n  };\n\n  const hide = id => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n\n    const elementsIndex = current.findIndex(element => element.id == id);\n    let newArray = [...current];\n    newArray = newArray.filter(el => {\n      return el.id !== id;\n    }); // update the local storage\n\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n\n    setdata(newArray);\n  };\n\n  const action = id => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n\n    const elementsIndex = current.findIndex(element => element.id == id);\n    let newArray = [...current];\n    newArray[elementsIndex] = { ...newArray[elementsIndex],\n      points: newArray[elementsIndex].points + 1\n    }; // update the local storage\n\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n\n    setdata(newArray); //     }\n    //     else if (button === 2) {\n    //       newArray = newArray.filter((el) => {\n    //   return el.id !== id;\n    // });\n    // console.log(newArray);\n    //     }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"base\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    data: data,\n    action: action,\n    hide: hide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Buttons, {\n    next: next,\n    prev: prev,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"vote\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, \"Votes\"), /*#__PURE__*/React.createElement(Chart, {\n    info: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/hopper/Documents/reactJs/hackernews_clone/src/App.js"],"names":["React","useState","useEffect","axios","Table","Chart","Buttons","App","data","setdata","nopg","setnopg","currentpg","setcurrentpg","PATH_BASE","PATH_SEARCH","PARAM_PAGE","PARAM_HPP","PARAM_TAGS","fetchData","saveInlocalStorage","arg","k","map","value","push","id","objectID","points","url","num_comments","created_at","author","title","Storage","localStorage","setItem","JSON","stringify","update","temp","getItem","parse","get","then","res","nbPages","hits","prev","next","hide","current","elementsIndex","findIndex","element","newArray","filter","el","action"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport Table from \"./components/Table.jsx\";\nimport Chart from \"./components/chart.jsx\";\nimport Buttons from \"./components/buttons.jsx\";\n\nfunction App() {\n  const [data, setdata] = useState([]);\n  const [nopg, setnopg] = useState(0);\n  const [currentpg, setcurrentpg] = useState(0);\n  const PATH_BASE = 'https://hn.algolia.com/api/v1';\n  const PATH_SEARCH = '/search';\n  const PARAM_PAGE = 'page=';\n  const PARAM_HPP = 'hitsPerPage=10';\n  const PARAM_TAGS = 'tags=front_page';\n  useEffect(() => {\n    fetchData(0);\n  }, []);\n  const saveInlocalStorage = (data, arg) => {\n    let k = [];\n    data.map((value) => {\n      k.push({\n        id: value.objectID,\n        points: value.points,\n        url: value.url,\n        num_comments: value.num_comments,\n        created_at: value.created_at,\n        author: value.author,\n        title: value.title,\n      });\n    });\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${arg}`, JSON.stringify(k));\n    }\n  };\n  const update = (arg) => {\n    let temp = localStorage.getItem(`page-${arg}`);\n    temp = JSON.parse(temp);\n    setdata(temp);\n  };\n  const fetchData = async (arg) => {\n    await axios\n      .get(`${PATH_BASE}${PATH_SEARCH}?${PARAM_TAGS}&${PARAM_HPP}&page=${arg}`)\n      .then((res) => {\n        setnopg(res.data.nbPages);\n        if (localStorage.getItem(`page-${arg}`) === null) {\n          saveInlocalStorage(res.data.hits, arg);\n          update(arg);\n        } else {\n          update(arg);\n        }\n      });\n  };\n  const prev = () => {\n    if (currentpg - 1 >= 0) {\n      setcurrentpg(currentpg - 1);\n      fetchData(currentpg - 1);\n    }\n  };\n  const next = () => {\n    if (currentpg + 1 < nopg) {\n      fetchData(currentpg + 1);\n      setcurrentpg(currentpg + 1);\n    }\n  };\n  const hide = (id) => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n    const elementsIndex = current.findIndex((element) => element.id == id);\n    let newArray = [...current];\n    newArray = newArray.filter((el) => {\n      return el.id !== id;\n    });\n    \n    // update the local storage\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n    setdata(newArray);\n  };\n  const action = (id) => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n    const elementsIndex = current.findIndex((element) => element.id == id);\n    let newArray = [...current];\n\n    newArray[elementsIndex] = {\n      ...newArray[elementsIndex],\n      points: newArray[elementsIndex].points + 1,\n    };\n\n    // update the local storage\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n    setdata(newArray);\n    //     }\n    //     else if (button === 2) {\n    //       newArray = newArray.filter((el) => {\n    //   return el.id !== id;\n    // });\n    // console.log(newArray);\n    //     }\n  };\n  return (\n    <div className=\"App\">\n      <div className=\"base\">\n        <Table data={data} action={action} hide={hide} />\n        <Buttons next={next} prev={prev} />\n        <div id=\"bar\"></div>\n        <div id=\"container\">\n          <div id=\"vote\">Votes</div>\n          <Chart info={data} />\n        </div>\n        <div id=\"id\">ID</div>\n        <div id=\"bar\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}