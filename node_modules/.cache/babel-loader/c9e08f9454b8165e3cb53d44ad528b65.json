{"ast":null,"code":"import _objectSpread from\"/Users/hopper/Documents/reactJs/hackernews_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/hopper/Documents/reactJs/hackernews_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/hopper/Documents/reactJs/hackernews_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hopper/Documents/reactJs/hackernews_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hopper/Documents/reactJs/hackernews_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./App.css\";import axios from\"axios\";import Table from\"./components/Table.jsx\";import Chart from\"./components/chart.jsx\";import Buttons from\"./components/buttons.jsx\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setdata=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),nopg=_useState4[0],setnopg=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentpg=_useState6[0],setcurrentpg=_useState6[1];var BASE_URL=\"http://hn.algolia.com/api/v1/search?tags=front_page&hitsPerPage=10\";useEffect(function(){fetchData(0);},[]);var saveInlocalStorage=function saveInlocalStorage(data,arg){var k=[];data.map(function(value){k.push({id:value.objectID,points:value.points,url:value.url,num_comments:value.num_comments,created_at:value.created_at,author:value.author,title:value.title});});if(typeof Storage!==\"undefined\"){localStorage.setItem(\"page-\".concat(arg),JSON.stringify(k));}};var update=function update(arg){var temp=localStorage.getItem(\"page-\".concat(arg));temp=JSON.parse(temp);setdata(temp);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(arg){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(BASE_URL,\"&page=\").concat(arg)).then(function(res){setnopg(res.data.nbPages);if(localStorage.getItem(\"page-\".concat(arg))===null){saveInlocalStorage(res.data.hits,arg);update(arg);}else{update(arg);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();var prev=function prev(){if(currentpg-1>=0){setcurrentpg(currentpg-1);fetchData(currentpg-1);}};var next=function next(){if(currentpg+1<nopg){fetchData(currentpg+1);setcurrentpg(currentpg+1);}};var hide=function hide(id){var current=localStorage.getItem(\"page-\".concat(currentpg));if(!current){current=[];}else{current=JSON.parse(current);}var elementsIndex=current.findIndex(function(element){return element.id==id;});var newArray=_toConsumableArray(current);newArray=newArray.filter(function(el){return el.id!==id;});// update the local storage\nif(typeof Storage!==\"undefined\"){localStorage.setItem(\"page-\".concat(currentpg),JSON.stringify(newArray));}setdata(newArray);};var action=function action(id){var current=localStorage.getItem(\"page-\".concat(currentpg));if(!current){current=[];}else{current=JSON.parse(current);}var elementsIndex=current.findIndex(function(element){return element.id==id;});var newArray=_toConsumableArray(current);newArray[elementsIndex]=_objectSpread(_objectSpread({},newArray[elementsIndex]),{},{points:newArray[elementsIndex].points+1});// update the local storage\nif(typeof Storage!==\"undefined\"){localStorage.setItem(\"page-\".concat(currentpg),JSON.stringify(newArray));}setdata(newArray);//     }\n//     else if (button === 2) {\n//       newArray = newArray.filter((el) => {\n//   return el.id !== id;\n// });\n// console.log(newArray);\n//     }\n};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"base\"},/*#__PURE__*/React.createElement(Table,{data:data,action:action,hide:hide}),/*#__PURE__*/React.createElement(Buttons,{next:next,prev:prev}),/*#__PURE__*/React.createElement(\"div\",{id:\"bar\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"container\"},/*#__PURE__*/React.createElement(\"div\",{id:\"vote\"},\"Votes\"),/*#__PURE__*/React.createElement(Chart,{info:data})),/*#__PURE__*/React.createElement(\"div\",{id:\"id\"},\"ID\"),/*#__PURE__*/React.createElement(\"div\",{id:\"bar\"})));}export default App;","map":{"version":3,"sources":["/Users/hopper/Documents/reactJs/hackernews_clone/src/App.js"],"names":["React","useState","useEffect","axios","Table","Chart","Buttons","App","data","setdata","nopg","setnopg","currentpg","setcurrentpg","BASE_URL","fetchData","saveInlocalStorage","arg","k","map","value","push","id","objectID","points","url","num_comments","created_at","author","title","Storage","localStorage","setItem","JSON","stringify","update","temp","getItem","parse","get","then","res","nbPages","hits","prev","next","hide","current","elementsIndex","findIndex","element","newArray","filter","el","action"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport Table from \"./components/Table.jsx\";\nimport Chart from \"./components/chart.jsx\";\nimport Buttons from \"./components/buttons.jsx\";\n\nfunction App() {\n  const [data, setdata] = useState([]);\n  const [nopg, setnopg] = useState(0);\n  const [currentpg, setcurrentpg] = useState(0);\n  let BASE_URL =\n    \"http://hn.algolia.com/api/v1/search?tags=front_page&hitsPerPage=10\";\n  useEffect(() => {\n    fetchData(0);\n  }, []);\n  const saveInlocalStorage = (data, arg) => {\n    let k = [];\n    data.map((value) => {\n      k.push({\n        id: value.objectID,\n        points: value.points,\n        url: value.url,\n        num_comments: value.num_comments,\n        created_at: value.created_at,\n        author: value.author,\n        title: value.title,\n      });\n    });\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${arg}`, JSON.stringify(k));\n    }\n  };\n  const update = (arg) => {\n    let temp = localStorage.getItem(`page-${arg}`);\n    temp = JSON.parse(temp);\n    setdata(temp);\n  };\n  const fetchData = async (arg) => {\n    await axios\n      .get(`${BASE_URL}&page=${arg}`)\n      .then((res) => {\n        setnopg(res.data.nbPages);\n        if (localStorage.getItem(`page-${arg}`) === null) {\n          saveInlocalStorage(res.data.hits, arg);\n          update(arg);\n        } else {\n          update(arg);\n        }\n      });\n  };\n  const prev = () => {\n    if (currentpg - 1 >= 0) {\n      setcurrentpg(currentpg - 1);\n      fetchData(currentpg - 1);\n    }\n  };\n  const next = () => {\n    if (currentpg + 1 < nopg) {\n      fetchData(currentpg + 1);\n      setcurrentpg(currentpg + 1);\n    }\n  };\n  const hide = (id) => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n    const elementsIndex = current.findIndex((element) => element.id == id);\n    let newArray = [...current];\n    newArray = newArray.filter((el) => {\n      return el.id !== id;\n    });\n    \n    // update the local storage\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n    setdata(newArray);\n  };\n  const action = (id) => {\n    let current = localStorage.getItem(`page-${currentpg}`);\n    if (!current) {\n      current = [];\n    } else {\n      current = JSON.parse(current);\n    }\n    const elementsIndex = current.findIndex((element) => element.id == id);\n    let newArray = [...current];\n\n    newArray[elementsIndex] = {\n      ...newArray[elementsIndex],\n      points: newArray[elementsIndex].points + 1,\n    };\n\n    // update the local storage\n    if (typeof Storage !== \"undefined\") {\n      localStorage.setItem(`page-${currentpg}`, JSON.stringify(newArray));\n    }\n    setdata(newArray);\n    //     }\n    //     else if (button === 2) {\n    //       newArray = newArray.filter((el) => {\n    //   return el.id !== id;\n    // });\n    // console.log(newArray);\n    //     }\n  };\n  return (\n    <div className=\"App\">\n      <div className=\"base\">\n        <Table data={data} action={action} hide={hide} />\n        <Buttons next={next} prev={prev} />\n        <div id=\"bar\"></div>\n        <div id=\"container\">\n          <div id=\"vote\">Votes</div>\n          <Chart info={data} />\n        </div>\n        <div id=\"id\">ID</div>\n        <div id=\"bar\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}